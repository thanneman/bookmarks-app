{"ast":null,"code":"import _classCallCheck from \"/Users/travishanneman/Desktop/Projects/bookmarks-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/travishanneman/Desktop/Projects/bookmarks-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/travishanneman/Desktop/Projects/bookmarks-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/travishanneman/Desktop/Projects/bookmarks-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/travishanneman/Desktop/Projects/bookmarks-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/travishanneman/Desktop/Projects/bookmarks-app/src/EditBookmark/EditBookmark.js\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport BookmarksContext from '../BookmarksContext';\nimport config from '../config';\nimport BookmarkForm from '../BookmarkForm/BookmarkForm';\n\nvar EditBookmark =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(EditBookmark, _Component);\n\n  function EditBookmark() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, EditBookmark);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(EditBookmark)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      error: null,\n      id: null,\n      title: null,\n      url: null,\n      description: null,\n      rating: null\n    };\n\n    _this.handleSubmit = function (bookmark, callback) {\n      _this.setState({\n        error: null\n      });\n\n      var bookmarkId = _this.props.match.params.bookmarkId;\n      fetch(config.API_ENDPOINT + \"/\".concat(bookmarkId), {\n        method: 'PATCH',\n        body: JSON.stringify(bookmark),\n        headers: {\n          'content-type': 'application/json',\n          'authorization': \"Bearer \".concat(config.API_KEY)\n        }\n      }).then(function (res) {\n        if (!res.ok) return res.json().then(function (error) {\n          return Promise.reject(error);\n        });\n      }).then(function () {\n        callback(callback);\n\n        _this.context.updateBookmark(bookmark);\n\n        _this.props.history.push('/');\n      }).catch(function (error) {\n        console.error(error);\n\n        _this.setState({\n          error: error\n        });\n      });\n    };\n\n    _this.handleClickCancel = function () {\n      _this.props.history.push('/');\n    };\n\n    return _this;\n  }\n\n  _createClass(EditBookmark, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var bookmarkId = this.props.match.params.bookmarkId;\n      fetch(config.API_ENDPOINT + \"/\".concat(bookmarkId), {\n        method: 'GET',\n        headers: {\n          'authorization': \"Bearer \".concat(config.API_KEY)\n        }\n      }).then(function (res) {\n        if (!res.ok) return res.json().then(function (error) {\n          return Promise.reject(error);\n        });\n        return res.json();\n      }).then(function (responseData) {\n        _this2.setState({\n          id: responseData.id,\n          title: responseData.title,\n          url: responseData.url,\n          description: responseData.description,\n          rating: responseData.rating\n        });\n      }).catch(function (error) {\n        console.error(error);\n\n        _this2.setState({\n          error: error\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          error = _this$state.error,\n          id = _this$state.id,\n          title = _this$state.title,\n          url = _this$state.url,\n          description = _this$state.description,\n          rating = _this$state.rating;\n      var bookmark = {\n        id: id,\n        title: title,\n        url: url,\n        description: description,\n        rating: rating\n      };\n      return React.createElement(\"section\", {\n        className: \"EditBookmark\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, \"Edit bookmark\"), id && React.createElement(BookmarkForm, {\n        onSubmit: this.handleSubmit,\n        onCancel: this.handleClickCancel,\n        error: error,\n        bookmark: bookmark,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return EditBookmark;\n}(Component);\n\nEditBookmark.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.object\n  }),\n  history: PropTypes.shape({\n    push: PropTypes.func\n  }).isRequired\n};\nEditBookmark.contextType = BookmarksContext;\nexport default EditBookmark;","map":{"version":3,"sources":["/Users/travishanneman/Desktop/Projects/bookmarks-app/src/EditBookmark/EditBookmark.js"],"names":["React","Component","PropTypes","BookmarksContext","config","BookmarkForm","EditBookmark","state","error","id","title","url","description","rating","handleSubmit","bookmark","callback","setState","bookmarkId","props","match","params","fetch","API_ENDPOINT","method","body","JSON","stringify","headers","API_KEY","then","res","ok","json","Promise","reject","context","updateBookmark","history","push","catch","console","handleClickCancel","responseData","propTypes","shape","object","func","isRequired","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from  'react';\nimport PropTypes from 'prop-types';\nimport BookmarksContext from '../BookmarksContext';\nimport config from '../config'\nimport BookmarkForm from '../BookmarkForm/BookmarkForm'\n\nclass EditBookmark extends Component {\n  static propTypes = {\n    match: PropTypes.shape({\n      params: PropTypes.object,\n    }),\n    history: PropTypes.shape({\n      push: PropTypes.func,\n    }).isRequired,\n  };\n\n  static contextType = BookmarksContext;\n\n  state = {\n    error: null,\n    id: null,\n    title: null,\n    url: null,\n    description: null,\n    rating: null,\n  };\n\n  componentDidMount() {\n    const { bookmarkId } = this.props.match.params\n    fetch(config.API_ENDPOINT + `/${bookmarkId}`, {\n      method: 'GET',\n      headers: {\n        'authorization': `Bearer ${config.API_KEY}`\n      }\n    })\n      .then(res => {\n        if (!res.ok)\n          return res.json().then(error => Promise.reject(error))\n\n        return res.json()\n      })\n      .then(responseData => {\n        this.setState({\n          id: responseData.id,\n          title: responseData.title,\n          url: responseData.url,\n          description: responseData.description,\n          rating: responseData.rating,\n        })\n      })\n      .catch(error => {\n        console.error(error)\n        this.setState({ error })\n      })\n  }\n\n  handleSubmit = (bookmark, callback) => {\n    this.setState({ error: null })\n    const { bookmarkId } = this.props.match.params\n    fetch(config.API_ENDPOINT + `/${bookmarkId}`, {\n      method: 'PATCH',\n      body: JSON.stringify(bookmark),\n      headers: {\n        'content-type': 'application/json',\n        'authorization': `Bearer ${config.API_KEY}`\n      },\n    })\n      .then(res => {\n        if (!res.ok)\n          return res.json().then(error => Promise.reject(error))\n      })\n      .then(() => {\n        callback(callback)\n        this.context.updateBookmark(bookmark)\n        this.props.history.push('/')\n      })\n      .catch(error => {\n        console.error(error)\n        this.setState({ error })\n      })\n  }\n\n  handleClickCancel = () => {\n    this.props.history.push('/')\n  };\n\n  render() {\n    const { error, id, title, url, description, rating } = this.state\n    const bookmark = { id, title, url, description, rating }\n    return (\n      <section className='EditBookmark'>\n        <h2>Edit bookmark</h2>\n        {id && (\n          <BookmarkForm\n            onSubmit={this.handleSubmit}\n            onCancel={this.handleClickCancel}\n            error={error}\n            bookmark={bookmark}\n          />\n        )}\n      </section>\n    );\n  }\n}\n\nexport default EditBookmark;"]},"metadata":{},"sourceType":"module"}