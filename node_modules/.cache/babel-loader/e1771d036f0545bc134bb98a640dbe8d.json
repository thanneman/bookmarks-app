{"ast":null,"code":"import _classCallCheck from \"/Users/travishanneman/Desktop/Projects/bookmarks-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/travishanneman/Desktop/Projects/bookmarks-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/travishanneman/Desktop/Projects/bookmarks-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/travishanneman/Desktop/Projects/bookmarks-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/travishanneman/Desktop/Projects/bookmarks-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/travishanneman/Desktop/Projects/bookmarks-app/src/EditBookmark/EditBookmark.js\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport BookmarksContext from '../BookmarksContext';\nimport config from '../config';\nimport './EditBookmark.css';\n\nvar Required = function Required() {\n  return React.createElement(\"span\", {\n    className: \"EditBookmark__required\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 8\n    },\n    __self: this\n  }, \"*\");\n};\n\nvar EditBookmark =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(EditBookmark, _Component);\n\n  function EditBookmark() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, EditBookmark);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(EditBookmark)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      error: null,\n      id: '',\n      title: '',\n      url: '',\n      description: '',\n      rating: 1\n    };\n\n    _this.handleChangeTitle = function (e) {\n      _this.setState({\n        title: e.target.value\n      });\n    };\n\n    _this.handleChangeUrl = function (e) {\n      _this.setState({\n        url: e.target.value\n      });\n    };\n\n    _this.handleChangeDescription = function (e) {\n      _this.setState({\n        description: e.target.value\n      });\n    };\n\n    _this.handleChangeRating = function (e) {\n      _this.setState({\n        rating: e.target.value\n      });\n    };\n\n    _this.handleSubmit = function (e) {\n      e.preventDefault();\n      var bookmarkId = _this.props.match.params.bookmarkId;\n      var _this$state = _this.state,\n          id = _this$state.id,\n          title = _this$state.title,\n          url = _this$state.url,\n          description = _this$state.description,\n          rating = _this$state.rating;\n      var newBookmark = {\n        id: id,\n        title: title,\n        url: url,\n        description: description,\n        rating: rating\n      };\n      fetch(config.API_ENDPOINT + \"/\".concat(bookmarkId), {\n        method: 'PATCH',\n        body: JSON.stringify(newBookmark),\n        headers: {\n          'content-type': 'application/json',\n          'authorization': \"Bearer \".concat(config.API_KEY)\n        }\n      }).then(function (res) {\n        if (!res.ok) return res.json().then(function (error) {\n          return Promise.reject(error);\n        });\n      }).then(function () {\n        _this.resetFields(newBookmark);\n\n        _this.context.updateBookmark(newBookmark);\n\n        _this.props.history.push('/');\n      }).catch(function (error) {\n        console.error(error);\n\n        _this.setState({\n          error: error\n        });\n      });\n    };\n\n    _this.resetFields = function (newFields) {\n      _this.setState({\n        id: newFields.id || '',\n        title: newFields.title || '',\n        url: newFields.url || '',\n        description: newFields.description || '',\n        rating: newFields.rating || ''\n      });\n    };\n\n    _this.handleClickCancel = function () {\n      _this.props.history.push('/');\n    };\n\n    return _this;\n  }\n\n  _createClass(EditBookmark, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var bookmarkId = this.props.match.params.bookmarkId;\n      fetch(config.API_ENDPOINT + \"/\".concat(bookmarkId), {\n        method: 'GET',\n        headers: {\n          'authorization': \"Bearer \".concat(config.API_KEY)\n        }\n      }).then(function (res) {\n        if (!res.ok) return res.json().then(function (error) {\n          return Promise.reject(error);\n        });\n        return res.json();\n      }).then(function (responseData) {\n        _this2.setState({\n          id: responseData.id,\n          title: responseData.title,\n          url: responseData.url,\n          description: responseData.description,\n          rating: responseData.rating\n        });\n      }).catch(function (error) {\n        console.error(error);\n\n        _this2.setState({\n          error: error\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state2 = this.state,\n          error = _this$state2.error,\n          title = _this$state2.title,\n          url = _this$state2.url,\n          description = _this$state2.description,\n          rating = _this$state2.rating;\n      return React.createElement(\"section\", {\n        className: \"EditBookmark\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, \"Edit bookmark\"), React.createElement(\"form\", {\n        className: \"EditBookmark__form\",\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"EditBookmark__error\",\n        role: \"alert\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, error && React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, error.message)), React.createElement(\"input\", {\n        type: \"hidden\",\n        name: \"id\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, \"Title\", ' ', React.createElement(Required, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      })), React.createElement(\"input\", {\n        type: \"text\",\n        name: \"title\",\n        id: \"title\",\n        placeholder: \"Great website!\",\n        required: true,\n        value: title,\n        onChange: this.handleChangeTitle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"url\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, \"URL\", ' ', React.createElement(Required, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      })), React.createElement(\"input\", {\n        type: \"url\",\n        name: \"url\",\n        id: \"url\",\n        placeholder: \"https://www.great-website.com/\",\n        required: true,\n        value: url,\n        onChange: this.handleChangeUrl,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, \"Description\"), React.createElement(\"textarea\", {\n        name: \"description\",\n        id: \"description\",\n        value: description,\n        onChange: this.handleChangeDescription,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"rating\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, \"Rating\", ' ', React.createElement(Required, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      })), React.createElement(\"input\", {\n        type: \"number\",\n        name: \"rating\",\n        id: \"rating\",\n        min: \"1\",\n        max: \"5\",\n        required: true,\n        value: rating,\n        onChange: this.handleChangeRating,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"EditBookmark__buttons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"button\",\n        onClick: this.handleClickCancel,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, \"Cancel\"), ' ', React.createElement(\"button\", {\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, \"Save\"))));\n    }\n  }]);\n\n  return EditBookmark;\n}(Component);\n\nEditBookmark.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.object\n  }),\n  history: PropTypes.shape({\n    push: PropTypes.func\n  }).isRequired\n};\nEditBookmark.contextType = BookmarksContext;\nexport default EditBookmark;","map":{"version":3,"sources":["/Users/travishanneman/Desktop/Projects/bookmarks-app/src/EditBookmark/EditBookmark.js"],"names":["React","Component","PropTypes","BookmarksContext","config","Required","EditBookmark","state","error","id","title","url","description","rating","handleChangeTitle","e","setState","target","value","handleChangeUrl","handleChangeDescription","handleChangeRating","handleSubmit","preventDefault","bookmarkId","props","match","params","newBookmark","fetch","API_ENDPOINT","method","body","JSON","stringify","headers","API_KEY","then","res","ok","json","Promise","reject","resetFields","context","updateBookmark","history","push","catch","console","newFields","handleClickCancel","responseData","message","propTypes","shape","object","func","isRequired","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from  'react';\nimport PropTypes from 'prop-types';\nimport BookmarksContext from '../BookmarksContext';\nimport config from '../config'\nimport './EditBookmark.css';\n\nconst Required = () => (\n  <span className='EditBookmark__required'>*</span>\n)\n\nclass EditBookmark extends Component {\n  static propTypes = {\n    match: PropTypes.shape({\n      params: PropTypes.object,\n    }),\n    history: PropTypes.shape({\n      push: PropTypes.func,\n    }).isRequired,\n  };\n\n  static contextType = BookmarksContext;\n\n  state = {\n    error: null,\n    id: '',\n    title: '',\n    url: '',\n    description: '',\n    rating: 1,\n  };\n\n  componentDidMount() {\n    const { bookmarkId } = this.props.match.params\n    fetch(config.API_ENDPOINT + `/${bookmarkId}`, {\n      method: 'GET',\n      headers: {\n        'authorization': `Bearer ${config.API_KEY}`\n      }\n    })\n      .then(res => {\n        if (!res.ok)\n          return res.json().then(error => Promise.reject(error))\n\n        return res.json()\n      })\n      .then(responseData => {\n        this.setState({\n          id: responseData.id,\n          title: responseData.title,\n          url: responseData.url,\n          description: responseData.description,\n          rating: responseData.rating,\n        })\n      })\n      .catch(error => {\n        console.error(error)\n        this.setState({ error })\n      })\n  }\n\n  handleChangeTitle = e => {\n    this.setState({ title: e.target.value })\n  };\n\n  handleChangeUrl = e => {\n    this.setState({ url: e.target.value })\n  };\n\n  handleChangeDescription = e => {\n    this.setState({ description: e.target.value })\n  };\n\n  handleChangeRating = e => {\n    this.setState({ rating: e.target.value })\n  };\n\n  handleSubmit = e => {\n    e.preventDefault()\n    const { bookmarkId } = this.props.match.params\n    const { id, title, url, description, rating } = this.state\n    const newBookmark = { id, title, url, description, rating }\n    fetch(config.API_ENDPOINT + `/${bookmarkId}`, {\n      method: 'PATCH',\n      body: JSON.stringify(newBookmark),\n      headers: {\n        'content-type': 'application/json',\n        'authorization': `Bearer ${config.API_KEY}`\n      },\n    })\n      .then(res => {\n        if (!res.ok)\n          return res.json().then(error => Promise.reject(error))\n      })\n      .then(() => {\n        this.resetFields(newBookmark)\n        this.context.updateBookmark(newBookmark)\n        this.props.history.push('/')\n      })\n      .catch(error => {\n        console.error(error)\n        this.setState({ error })\n      })\n  }\n\n  resetFields = (newFields) => {\n    this.setState({\n      id: newFields.id || '',\n      title: newFields.title || '',\n      url: newFields.url || '',\n      description: newFields.description || '',\n      rating: newFields.rating || '',\n    })\n  }\n\n  handleClickCancel = () => {\n    this.props.history.push('/')\n  };\n\n  render() {\n    const { error, title, url, description, rating } = this.state\n    return (\n      <section className='EditBookmark'>\n        <h2>Edit bookmark</h2>\n        <form\n          className='EditBookmark__form'\n          onSubmit={this.handleSubmit}\n        >\n          <div className='EditBookmark__error' role='alert'>\n            {error && <p>{error.message}</p>}\n          </div>\n          <input\n            type='hidden'\n            name='id'\n          />\n          <div>\n            <label htmlFor='title'>\n              Title\n              {' '}\n              <Required />\n            </label>\n            <input\n              type='text'\n              name='title'\n              id='title'\n              placeholder='Great website!'\n              required\n              value={title}\n              onChange={this.handleChangeTitle}\n            />\n          </div>\n          <div>\n            <label htmlFor='url'>\n              URL\n              {' '}\n              <Required />\n            </label>\n            <input\n              type='url'\n              name='url'\n              id='url'\n              placeholder='https://www.great-website.com/'\n              required\n              value={url}\n              onChange={this.handleChangeUrl}\n            />\n          </div>\n          <div>\n            <label htmlFor='description'>\n              Description\n            </label>\n            <textarea\n              name='description'\n              id='description'\n              value={description}\n              onChange={this.handleChangeDescription}\n            />\n          </div>\n          <div>\n            <label htmlFor='rating'>\n              Rating\n              {' '}\n              <Required />\n            </label>\n            <input\n              type='number'\n              name='rating'\n              id='rating'\n              min='1'\n              max='5'\n              required\n              value={rating}\n              onChange={this.handleChangeRating}\n            />\n          </div>\n          <div className='EditBookmark__buttons'>\n            <button type='button' onClick={this.handleClickCancel}>\n              Cancel\n            </button>\n            {' '}\n            <button type='submit'>\n              Save\n            </button>\n          </div>\n        </form>\n      </section>\n    );\n  }\n}\n\nexport default EditBookmark;"]},"metadata":{},"sourceType":"module"}